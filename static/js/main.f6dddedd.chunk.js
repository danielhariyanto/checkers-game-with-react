(this.webpackJsonpcheckers_tesla=this.webpackJsonpcheckers_tesla||[]).push([[0],{23:function(e,t,r){},33:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(15),s=r.n(i),l=(r(23),r(3)),u=r(4),o=r(6),c=r(5);function h(e){return 1===Math.abs(e%2)}function v(e,t){return e[t.charAt(0)]}function p(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t===e[r])return r;return!1}function m(e){return parseInt(e.charAt(1),10)}function f(e){return!0===e?"player1":"player2"}var y=function(){function e(t){Object(l.a)(this,e),this.columns=t}return Object(u.a)(e,[{key:"getCorners",value:function(e){var t=v(this.columns,e),r=m(e),n=t-1>=0&&p(this.columns,t-1),a=t+1<=7&&p(this.columns,t+1),i=r+1<9&&r+1,s=r-1>0&&r-1,l={};return l.leftUpper=!1!==n&&!1!==i?n+i:null,l.rightUpper=!1!==a&&!1!==i?a+i:null,l.leftLower=!1!==n&&!1!==s?n+s:null,l.rightLower=!1!==a&&!1!==s?a+s:null,l}},{key:"getMoves",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===e[t])return[];var a,i=[],s=[],l={},u=this.getCorners(t),o=m(t),c=e[t].player,h="player1"===c?o-1:o+1;for(var v in u)if(u.hasOwnProperty(v)){var p=u[v];if(null!==p&&(r||!(p.indexOf(h)<0)))if(null===e[p])i.push(p);else{var f=e[p];if(f.player===c)continue;var y=this.getCorners(p),d=y[v];null===e[d]&&(l[p]=d,s.push(d))}}a=!1===n?i.concat(s):s;var b=s.length>0?l:null;if(b)for(var g in a=[],b)a.push(b[g]);return[a,b]}},{key:"movePiece",value:function(e,t){var r=Object.assign({},t.history[t.stepNumber]),n=Object.assign({},r.boardState),a=Object.assign({},n[t.activePiece]),i=[];for(var s in t.jumpKills)t.jumpKills.hasOwnProperty(s)&&i.push(t.jumpKills[s]);if(t.moves.indexOf(e)<0&&i.indexOf(e)<0)return null;this.shouldKing(a,e)&&(a.isKing=!0),n[t.activePiece]=null,n[e]=a;var l,u,o=a.player,c=null,h=[],v="player2"===o,p=null;i.indexOf(e)>-1&&(n[(l=t.jumpKills,u=e,Object.keys(l).find((function(e){return l[e]===u})))]=null,(h=this.getMoves(n,e,a.isKing,!0))[0].length>0?(c=!0,v=r.currentPlayer,p=e):c=null);!0===c&&h[0].length>0&&(v=r.currentPlayer,p=e);var m={};return m.boardState=n,m.currentPlayer=v,m.activePiece=p,m.moves=!0===c?h[0]:[],m.jumpKills=!0===c?h[1]:null,m.hasJumped=!0===c?o:null,m.winner=this.evaluateWinner(n),m}},{key:"shouldKing",value:function(e,t){if(!0===e.isKing)return!1;var r=m(t),n=e.player;return 1===r&&"player1"===n||8===r&&"player2"===n}},{key:"evaluateWinner",value:function(e){var t=0,r=0,n=0,a=0;for(var i in e)if(e.hasOwnProperty(i)&&null!==e[i]){var s=this.getMoves(e,i,e[i].isKing,!1)[0].length;"player1"===e[i].player?(++t,r+=s):(++n,a+=s)}return 0===t?"player2pieces":0===n?"player1pieces":0===r?"player2moves":0===a?"player1moves":null}}]),e}(),d=r(1);function b(e){var t=e.squareClasses,r=e.onClick;return Object(d.jsx)("button",{className:"square "+t,onClick:r})}var g=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"renderSquare",value:function(e,t){var r=this;return Object(d.jsx)(b,{squareClasses:t,onClick:function(){return r.props.onClick(e)}},e)}},{key:"render",value:function(){var e=[],t=[],r=this.props.moves;for(var n in this.props.boardState)if(this.props.boardState.hasOwnProperty(n)){var a=v(this.props.columns,n),i=m(n),s=f(this.props.currentPlayer),l=h(a)&&h(i)||!h(a)&&!h(i)?"white":"black",u=[];if(u.push(n),u.push(l),this.props.activePiece===n&&u.push("isActive"),r.indexOf(n)>-1){var o="movable "+s+"-move";u.push(o)}null!==this.props.boardState[n]&&(u.push(this.props.boardState[n].player+" piece"),!0===this.props.boardState[n].isKing&&u.push("king")),u=u.join(" "),t.push(this.renderSquare(n,u,this.props.boardState[n])),t.length>=8&&(t=t.reverse(),e.push(Object(d.jsx)("div",{className:"board-col",children:t},e.length)),t=[])}return e}}]),r}(a.a.Component),j=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"getComputerMoves",value:function(e,t){var r={};for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];if(null!=a&&a.player===t){var i=this.getMoves(e,n,e[n].isKing,!1);(i[0].length>0||null!==i[1])&&(r[n]=i)}}return r}},{key:"getSmartMove",value:function(e,t,r){for(var n=this.getComputerMoves(t,r),a=Object.keys(n),i={},s=0;s<a.length;++s){var l=a[s],u=n[l][0],o=n[l][1],c=[];for(var h in o)o.hasOwnProperty(h)&&c.push(o[h]);for(var v=0,p=null,m=0;m<u.length;++m){var f=u[m],y=0,d=Object.assign({},e);for(d.activePiece=l,d.moves=u,d.jumpKills=o,c.indexOf(f)>-1&&(y+=10);!1===d.currentPlayer;){var b=this.getMoves(d,d.activePiece,d.activePiece.isKing,!0);d.moves=b[0],d.jumpKills=b[1],y+=10}y>=v&&(v=y,p=f)}i[l]=[p,v]}var g=[],j=0;for(var P in i)if(i.hasOwnProperty(P)){var O=i[P][0],k=i[P][1];k>=j&&(k===j&&g.push([P,O]),k>j&&((g=[]).push([P,O]),j=k))}var S=g[Math.floor(Math.random()*g.length)],C={};return C.piece=S[0],C.moveTo=S[1],C}},{key:"getRandomMove",value:function(e,t){var r=this.getComputerMoves(e,t),n=Object.keys(r),a=n[Math.floor(Math.random()*n.length)],i=r[a][0],s=i[Math.floor(Math.random()*i.length)],l={};return l.piece=a,l.moveTo=s,l}}]),r}(y),P=r(35),O=r(16),k=r.n(O)()(),S=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).columns=n.setColumns(),n.Logic=new y(n.columns),n.Opponent=new j(n.columns),n.state={history:[{boardState:n.createBoard(),currentPlayer:!0}],activePiece:null,moves:[],jumpKills:null,hasJumped:null,stepNumber:0,winner:null},n}return Object(u.a)(r,[{key:"setColumns",value:function(){var e={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7};return e}},{key:"createBoard",value:function(){var e={};for(var t in this.columns)if(this.columns.hasOwnProperty(t))for(var r=1;r<=8;++r){e[t+r]=null}return e=this.initPlayers(e)}},{key:"initPlayers",value:function(e){var t=this;return["a8","c8","e8","g8","b7","d7","f7","h7","a6","c6","e6","g6"].forEach((function(r){e[r]=t.createPiece(r,"player1")})),["b3","d3","f3","h3","a2","c2","e2","g2","b1","d1","f1","h1"].forEach((function(r){e[r]=t.createPiece(r,"player2")})),e}},{key:"createPiece",value:function(e,t){var r={};return r.player=t,r.location=e,r.isKing=!1,r}},{key:"getCurrentState",value:function(){var e=this.state.history.slice(0,this.state.stepNumber+1);return e[e.length-1]}},{key:"handleClick",value:function(e){if(null===this.state.winner){var t=this.getCurrentState(),r=t.boardState,n=r[e];if(null===n){if(null!==this.state.activePiece&&this.state.moves.length>0){var a=this.Logic.movePiece(e,this.state);if(null===a)return;this.updateStatePostMove(a),!1===a.currentPlayer&&null===a.winner&&this.computerTurn()}}else{if(n.player!==f(t.currentPlayer))return;if(this.state.activePiece===e&&null===this.state.hasJumped)return void this.setState({activePiece:null,moves:[],jumpKills:null});if(null!==this.state.hasJumped&&null!==r[e])return;var i=this.Logic.getMoves(r,e,n.isKing,!1);this.setState({activePiece:e,moves:i[0],jumpKills:i[1]})}}}},{key:"computerTurn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;setTimeout((function(){var r,n,a,i=e.getCurrentState().boardState;null===t?(n=(r=e.Opponent.getSmartMove(e.state,i,"player2")).piece,a=r.moveTo):(r=e.Logic.getMoves(i,t,i[t].isKing,!0),n=t,a=r[0][Math.floor(Math.random()*r[0].length)]);var s=i[n],l=e.Logic.getMoves(i,n,s.isKing,!1);e.setState({activePiece:n,moves:l[0],jumpKills:l[1]}),setTimeout((function(){var t=e.Logic.movePiece(a,e.state);null!==t&&(e.updateStatePostMove(t),!1===t.currentPlayer&&e.computerTurn(t.activePiece))}),500)}),1e3)}},{key:"updateStatePostMove",value:function(e){this.setState({history:this.state.history.concat([{boardState:e.boardState,currentPlayer:e.currentPlayer}]),activePiece:e.activePiece,moves:e.moves,jumpKills:e.jumpKills,hasJumped:e.hasJumped,stepNumber:this.state.history.length,winner:e.winner})}},{key:"undo",value:function(){var e=parseInt(this.state.stepNumber,10)-1;if(!(e<0)){var t=this.state.history.slice(0,e+1);this.setState({history:t,activePiece:null,moves:[],jumpKills:null,hasJumped:null,stepNumber:e,winner:null})}}},{key:"render",value:function(){var e,t=this,r=this.columns,n=this.state.history,a=this.state.activePiece,i=n[this.state.stepNumber],s=i.boardState,l=i.currentPlayer,u=this.state.moves,o="undo";switch(this.state.stepNumber<1&&(o+=" disabled"),this.state.winner){case"player1pieces":e="You Win!";break;case"player2pieces":e="Computer Wins!";break;case"player1moves":e="No moves left - You Win!";break;case"player2moves":e="No moves left - Computer Wins!";break;default:e=!0===i.currentPlayer?"Your Turn":"Computer's Turn"}return Object(d.jsx)(P.a,{history:k,basename:"react-checkers",children:Object(d.jsxs)("div",{className:"reactCheckers",children:[Object(d.jsx)("div",{className:"game-board",children:Object(d.jsx)(g,{boardState:s,currentPlayer:l,activePiece:a,moves:u,columns:r,onClick:function(e){return t.handleClick(e)}})}),Object(d.jsxs)("div",{className:"game-status",children:[e,Object(d.jsx)("div",{className:"time-travel",children:Object(d.jsx)("button",{className:o,onClick:function(){return t.undo()},children:"Undo"})})]})]})})}}]),r}(a.a.Component);s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f6dddedd.chunk.js.map